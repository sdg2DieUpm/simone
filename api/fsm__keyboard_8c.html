<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simone: a game of visual memory and speed: common/src/fsm_keyboard.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Simone: a game of visual memory and speed
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fsm__keyboard_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsm_keyboard.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Keyboard FSM main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="port__system_8h.html">port_system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port__keyboard_8h.html">port_keyboard.h</a>&quot;</code><br />
<code>#include &quot;fsm.h&quot;</code><br />
<code>#include &quot;<a class="el" href="fsm__keyboard_8h.html">fsm_keyboard.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="keyboards_8h.html">keyboards.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a57693053efdcb0a0c184aef1af342f84"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a57693053efdcb0a0c184aef1af342f84">check_row_timeout</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a57693053efdcb0a0c184aef1af342f84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the timeout to activate a new row and scan columns has passed.  <a href="fsm__keyboard_8c.html#a57693053efdcb0a0c184aef1af342f84">More...</a><br /></td></tr>
<tr class="separator:a57693053efdcb0a0c184aef1af342f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a181396d88476cda9e081934bd501866a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a181396d88476cda9e081934bd501866a">check_keyboard_pressed</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a181396d88476cda9e081934bd501866a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the keyboard has been pressed.  <a href="fsm__keyboard_8c.html#a181396d88476cda9e081934bd501866a">More...</a><br /></td></tr>
<tr class="separator:a181396d88476cda9e081934bd501866a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603a9e3828d6bec474143fbc7d3729a4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a603a9e3828d6bec474143fbc7d3729a4">check_keyboard_released</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a603a9e3828d6bec474143fbc7d3729a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the keyboard has been released.  <a href="fsm__keyboard_8c.html#a603a9e3828d6bec474143fbc7d3729a4">More...</a><br /></td></tr>
<tr class="separator:a603a9e3828d6bec474143fbc7d3729a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f02469ecb017e449a64fffc2feea43"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#ad6f02469ecb017e449a64fffc2feea43">check_timeout</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:ad6f02469ecb017e449a64fffc2feea43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the debounce-time has passed.  <a href="fsm__keyboard_8c.html#ad6f02469ecb017e449a64fffc2feea43">More...</a><br /></td></tr>
<tr class="separator:ad6f02469ecb017e449a64fffc2feea43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054ad483945d23e8a8665dca6eef6ede"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a054ad483945d23e8a8665dca6eef6ede">do_excite_next_row</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a054ad483945d23e8a8665dca6eef6ede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean the row timeout flag and update the row to be excited.  <a href="fsm__keyboard_8c.html#a054ad483945d23e8a8665dca6eef6ede">More...</a><br /></td></tr>
<tr class="separator:a054ad483945d23e8a8665dca6eef6ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a408606e4da6d7f5578eaa4c55586bac4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a408606e4da6d7f5578eaa4c55586bac4">do_store_tick_pressed</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a408606e4da6d7f5578eaa4c55586bac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the system tick when the keyboard was pressed.  <a href="fsm__keyboard_8c.html#a408606e4da6d7f5578eaa4c55586bac4">More...</a><br /></td></tr>
<tr class="separator:a408606e4da6d7f5578eaa4c55586bac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef4ad914df9a80126cd4718a9648ae6f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#aef4ad914df9a80126cd4718a9648ae6f">do_set_key_value</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:aef4ad914df9a80126cd4718a9648ae6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the key value of the keyboard press.  <a href="fsm__keyboard_8c.html#aef4ad914df9a80126cd4718a9648ae6f">More...</a><br /></td></tr>
<tr class="separator:aef4ad914df9a80126cd4718a9648ae6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743c54651263fd0c4ab1990805d751b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a743c54651263fd0c4ab1990805d751b9">fsm_keyboard_init</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm_keyboard, uint32_t debounce_time, uint8_t keyboard_id)</td></tr>
<tr class="memdesc:a743c54651263fd0c4ab1990805d751b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a keyboard FSM.  <a href="fsm__keyboard_8c.html#a743c54651263fd0c4ab1990805d751b9">More...</a><br /></td></tr>
<tr class="separator:a743c54651263fd0c4ab1990805d751b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c19f9f958bbe1f354c860429b861cac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a6c19f9f958bbe1f354c860429b861cac">fsm_keyboard_new</a> (uint32_t debounce_time, uint8_t keyboard_id)</td></tr>
<tr class="memdesc:a6c19f9f958bbe1f354c860429b861cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new keyboard FSM.  <a href="fsm__keyboard_8c.html#a6c19f9f958bbe1f354c860429b861cac">More...</a><br /></td></tr>
<tr class="separator:a6c19f9f958bbe1f354c860429b861cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7aff5223cfbb75cff915bdfd79d708"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#afc7aff5223cfbb75cff915bdfd79d708">fsm_keyboard_destroy</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:afc7aff5223cfbb75cff915bdfd79d708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a keyboard FSM.  <a href="fsm__keyboard_8c.html#afc7aff5223cfbb75cff915bdfd79d708">More...</a><br /></td></tr>
<tr class="separator:afc7aff5223cfbb75cff915bdfd79d708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0970ced1b57504ad5b12615739ef78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#afe0970ced1b57504ad5b12615739ef78">fsm_keyboard_fire</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:afe0970ced1b57504ad5b12615739ef78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fire the keyboard FSM.  <a href="fsm__keyboard_8c.html#afe0970ced1b57504ad5b12615739ef78">More...</a><br /></td></tr>
<tr class="separator:afe0970ced1b57504ad5b12615739ef78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafaf6fcd9ca711020deeb33b09b26ac"><td class="memItemLeft" align="right" valign="top">fsm_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#aeafaf6fcd9ca711020deeb33b09b26ac">fsm_keyboard_get_inner_fsm</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:aeafaf6fcd9ca711020deeb33b09b26ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the inner FSM of the keyboard.  <a href="fsm__keyboard_8c.html#aeafaf6fcd9ca711020deeb33b09b26ac">More...</a><br /></td></tr>
<tr class="separator:aeafaf6fcd9ca711020deeb33b09b26ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70aab22ee8dd2d3ca43decfbf564fb1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#ad70aab22ee8dd2d3ca43decfbf564fb1">fsm_keyboard_get_state</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:ad70aab22ee8dd2d3ca43decfbf564fb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of the keyboard FSM.  <a href="fsm__keyboard_8c.html#ad70aab22ee8dd2d3ca43decfbf564fb1">More...</a><br /></td></tr>
<tr class="separator:ad70aab22ee8dd2d3ca43decfbf564fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3800f97988d6dcea1947029e18b1f6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#aa3800f97988d6dcea1947029e18b1f6e">fsm_keyboard_start_scan</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:aa3800f97988d6dcea1947029e18b1f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the keyboard scanning.  <a href="fsm__keyboard_8c.html#aa3800f97988d6dcea1947029e18b1f6e">More...</a><br /></td></tr>
<tr class="separator:aa3800f97988d6dcea1947029e18b1f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a327ce7c81f8e434bf46c193bd9362096"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a327ce7c81f8e434bf46c193bd9362096">fsm_keyboard_stop_scan</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a327ce7c81f8e434bf46c193bd9362096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the keyboard scanning.  <a href="fsm__keyboard_8c.html#a327ce7c81f8e434bf46c193bd9362096">More...</a><br /></td></tr>
<tr class="separator:a327ce7c81f8e434bf46c193bd9362096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8538a0c128e72aab9b469ed0ace3ddf0"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a8538a0c128e72aab9b469ed0ace3ddf0">fsm_keyboard_get_key_value</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a8538a0c128e72aab9b469ed0ace3ddf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the key pressed of the last keyboard press.  <a href="fsm__keyboard_8c.html#a8538a0c128e72aab9b469ed0ace3ddf0">More...</a><br /></td></tr>
<tr class="separator:a8538a0c128e72aab9b469ed0ace3ddf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5c963d23ba40e1e2e16349c90d90a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a2c5c963d23ba40e1e2e16349c90d90a8">fsm_keyboard_get_is_valid_key</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a2c5c963d23ba40e1e2e16349c90d90a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the last key pressed is valid.  <a href="fsm__keyboard_8c.html#a2c5c963d23ba40e1e2e16349c90d90a8">More...</a><br /></td></tr>
<tr class="separator:a2c5c963d23ba40e1e2e16349c90d90a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ecbf29d78b69cf47621bd74d521a38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a38ecbf29d78b69cf47621bd74d521a38">fsm_keyboard_reset_key_value</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a38ecbf29d78b69cf47621bd74d521a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the key pressed of the last keyboard press.  <a href="fsm__keyboard_8c.html#a38ecbf29d78b69cf47621bd74d521a38">More...</a><br /></td></tr>
<tr class="separator:a38ecbf29d78b69cf47621bd74d521a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bdb22f0e7fd5bc05b34c87ea7d65e5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a22bdb22f0e7fd5bc05b34c87ea7d65e5">fsm_keyboard_check_activity</a> (<a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a22bdb22f0e7fd5bc05b34c87ea7d65e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the keyboard FSM is active, or not.  <a href="fsm__keyboard_8c.html#a22bdb22f0e7fd5bc05b34c87ea7d65e5">More...</a><br /></td></tr>
<tr class="separator:a22bdb22f0e7fd5bc05b34c87ea7d65e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a06f1a2e6497aafa80e93c8d23e6be456"><td class="memItemLeft" align="right" valign="top">static fsm_trans_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__keyboard_8c.html#a06f1a2e6497aafa80e93c8d23e6be456">fsm_trans_keyboard</a> []</td></tr>
<tr class="memdesc:a06f1a2e6497aafa80e93c8d23e6be456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array representing the transitions table of the FSM keyboard.  <a href="fsm__keyboard_8c.html#a06f1a2e6497aafa80e93c8d23e6be456">More...</a><br /></td></tr>
<tr class="separator:a06f1a2e6497aafa80e93c8d23e6be456"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Keyboard FSM main file. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2026-01-01 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a181396d88476cda9e081934bd501866a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a181396d88476cda9e081934bd501866a">&#9670;&nbsp;</a></span>check_keyboard_pressed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_keyboard_pressed </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the keyboard has been pressed. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call function <code>port_keyboard_get_pressed()</code> and retrieve the status <br  />
âœ… 2. Return the status </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a603a9e3828d6bec474143fbc7d3729a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603a9e3828d6bec474143fbc7d3729a4">&#9670;&nbsp;</a></span>check_keyboard_released()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_keyboard_released </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the keyboard has been released. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call function <code>port_keyboard_get_pressed()</code> and retrieve the status <br  />
âœ… 2. Return the inverse of the status </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a57693053efdcb0a0c184aef1af342f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57693053efdcb0a0c184aef1af342f84">&#9670;&nbsp;</a></span>check_row_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_row_timeout </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the timeout to activate a new row and scan columns has passed. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Return the value of the field <code>flag_row_timeout</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="ad6f02469ecb017e449a64fffc2feea43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f02469ecb017e449a64fffc2feea43">&#9670;&nbsp;</a></span>check_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_timeout </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the debounce-time has passed. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call function <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> and retrieve the current system tick <br  />
âœ… 2. Check if the current system tick is higher than the field <code>next_timeout</code> <br  />
âœ… 3. Return <code>true</code> if it is higher, otherwise return <code>false</code> </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a054ad483945d23e8a8665dca6eef6ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054ad483945d23e8a8665dca6eef6ede">&#9670;&nbsp;</a></span>do_excite_next_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_excite_next_row </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean the row timeout flag and update the row to be excited. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Clear the flag that indicates the row timeout with <code><a class="el" href="port__keyboard_8h.html#ae652d3e4324278a555817e5cdfc128a5" title="Set the status of the row timeout flag.">port_keyboard_set_row_timeout_status()</a></code>. <br  />
âœ… 2. Excite the the next row by calling <code><a class="el" href="port__keyboard_8h.html#a76ff0a28d6cad5c0b67c4bc2f37cc2d2" title="Update the row to be excited.">port_keyboard_excite_next_row()</a></code> function. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aef4ad914df9a80126cd4718a9648ae6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef4ad914df9a80126cd4718a9648ae6f">&#9670;&nbsp;</a></span>do_set_key_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_set_key_value </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the key value of the keyboard press. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call function <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> and retrieve the current system tick <br  />
âœ… 2. Update the field <code>next_timeout</code> considering the current tick and the field <code>debounce_time_ms</code> <br  />
âœ… 3. Save the <code>key_value</code> of key pressed calling the appropriate port function. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a408606e4da6d7f5578eaa4c55586bac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a408606e4da6d7f5578eaa4c55586bac4">&#9670;&nbsp;</a></span>do_store_tick_pressed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_store_tick_pressed </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the system tick when the keyboard was pressed. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call function <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> and retrieve the current system tick <br  />
âœ… 2. Store it in the field <code>tick_pressed</code> <br  />
âœ… 3. Update the field <code>next_timeout</code> considering the current tick and the field <code>debounce_time_ms</code> </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a22bdb22f0e7fd5bc05b34c87ea7d65e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bdb22f0e7fd5bc05b34c87ea7d65e5">&#9670;&nbsp;</a></span>fsm_keyboard_check_activity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fsm_keyboard_check_activity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the keyboard FSM is active, or not. </p>
<p>The keyboard is always inactive because it works with events.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos Version 4:</b></p>
<p>âœ… 1. Return <code>false</code> always. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="afc7aff5223cfbb75cff915bdfd79d708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc7aff5223cfbb75cff915bdfd79d708">&#9670;&nbsp;</a></span>fsm_keyboard_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_keyboard_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a keyboard FSM. </p>
<p>This function destroys a keyboard FSM and frees the memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe0970ced1b57504ad5b12615739ef78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0970ced1b57504ad5b12615739ef78">&#9670;&nbsp;</a></span>fsm_keyboard_fire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_keyboard_fire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fire the keyboard FSM. </p>
<p>This function is used to fire the keyboard FSM. It is used to check the transitions and execute the actions of the keyboard FSM.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call the <code>fsm_fire()</code> function. Pass the address of the <code>fsm_t</code> struct. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeafaf6fcd9ca711020deeb33b09b26ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeafaf6fcd9ca711020deeb33b09b26ac">&#9670;&nbsp;</a></span>fsm_keyboard_get_inner_fsm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsm_t* fsm_keyboard_get_inner_fsm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the inner FSM of the keyboard. </p>
<p>This function returns the inner FSM of the keyboard.</p>
<blockquote class="doxtable">
<p>&#160;&#160;&#160;&#160;ðŸ’¡ This function is important because the struct is private and external functions such as those of the unit tests cannot access the inner FSM directly. <br  />
</p>
</blockquote>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Return the address of the <code>f</code> field of the struct. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsm_t* Pointer to the inner FSM. </dd></dl>

</div>
</div>
<a id="a2c5c963d23ba40e1e2e16349c90d90a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c5c963d23ba40e1e2e16349c90d90a8">&#9670;&nbsp;</a></span>fsm_keyboard_get_is_valid_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fsm_keyboard_get_is_valid_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the last key pressed is valid. </p>
<p>This function checks if the last key pressed is valid by comparing it with the invalid key value.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Return true if the field <code>key_pressed</code> is different from <code>invalid_key</code>, otherwise return false. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a8538a0c128e72aab9b469ed0ace3ddf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8538a0c128e72aab9b469ed0ace3ddf0">&#9670;&nbsp;</a></span>fsm_keyboard_get_key_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char fsm_keyboard_get_key_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the key pressed of the last keyboard press. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Retrieve and return the field <code>key_pressed</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char Key pressed of the last keyboard press. </dd></dl>

</div>
</div>
<a id="ad70aab22ee8dd2d3ca43decfbf564fb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70aab22ee8dd2d3ca43decfbf564fb1">&#9670;&nbsp;</a></span>fsm_keyboard_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t fsm_keyboard_get_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the state of the keyboard FSM. </p>
<p>This function returns the current state of the keyboard FSM.</p>
<blockquote class="doxtable">
<p>&#160;&#160;&#160;&#160;ðŸ’¡ This function is important because the struct is private and external functions such as those of the unit tests cannot access the state of the FSM directly. <br  />
</p>
</blockquote>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Retrieve and return the field <code>current_state</code> of the FSM (field <code>f</code> of the struct). <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t Current state of the keyboard FSM. </dd></dl>

</div>
</div>
<a id="a743c54651263fd0c4ab1990805d751b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a743c54651263fd0c4ab1990805d751b9">&#9670;&nbsp;</a></span>fsm_keyboard_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fsm_keyboard_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_keyboard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>debounce_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyboard_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize a keyboard FSM. </p>
<p>This function initializes the default values of the FSM struct and calls to the <code>port</code> to initialize the associated HW given the ID.</p>
<p>This FSM implements an anti-debounce mechanism. Debounces (or very fast keyboard presses) lasting less than the <code>debounce_time_ms</code> are filtered out.</p>
<p>The FSM stores the key_value of the last keyboard press. The user should ask for it using the function <code><a class="el" href="fsm__keyboard_8c.html#a8538a0c128e72aab9b469ed0ace3ddf0" title="Return the key pressed of the last keyboard press.">fsm_keyboard_get_key_value()</a></code>.</p>
<p>At start and reset, the key value value must be 0 ms. A value of 0 ms means that there has not been a new keyboard press.</p>
<dl class="section attention"><dt>Attention</dt><dd>The user is required to reset the key value value once it has been read. Otherwise, this value may be misinterpreted by the user, if successive calls are made without having pressed the keyboard. In such a case we would be reading past information. In order to reset the value, the function <code><a class="el" href="fsm__keyboard_8c.html#a38ecbf29d78b69cf47621bd74d521a38" title="Reset the key pressed of the last keyboard press.">fsm_keyboard_reset_key_value()</a></code> must be called.</dd></dl>
<p>In other words, the status flag of this FSM is the variable key_value. A key_value of null key means that no new keyboard has been pressed, a value other than null key means that it has been pressed and the value is the key pressed, so it is the user's responsibility to clear this status flag.</p>
<p>The FSM contains information of the keyboard ID. This ID is a unique identifier that is managed by the user in the <code>port</code>. That is where the user provides identifiers and HW information for all the keyboards on his system. The FSM does not have to know anything of the underlying HW.</p>
<dl class="section note"><dt>Note</dt><dd>Both unit and integration tests (example) are provided for this keyboard library are available in this GitHub repository: <a href="https://github.com/sdg2DieUpm/simone/tree/simone_v1_test">https://github.com/sdg2DieUpm/simone/tree/simone_v1_test</a></dd></dl>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call the <code>fsm_init()</code> to initialize the FSM. Pass the address of the <code>fsm_t</code> struct and the transition table <br  />
âœ… 2. Initialize the fields <code>debounce_time_ms</code>, <code>keyboard_id</code> of <code>p_fsm_keyboard</code> with the received values <br  />
âœ… 3. Initialize the fields <code>tick_pressed</code> and <code>invalid_key</code> of <code>p_fsm_keyboard</code> properly. Initialize the ID as well. <br  />
âœ… 4. Call the function <code><a class="el" href="port__keyboard_8h.html#ab6d73a385387a3fc0d0a2d2ded42e5d8" title="Configure the HW specifications of a given keyboard.">port_keyboard_init()</a></code> âœ… 5. Call the function <code><a class="el" href="port__keyboard_8h.html#a0c5d7b4fe5f2da20f60a2551c990fe17" title="Return the null key value of a given keyboard.">port_keyboard_get_invalid_key_value()</a></code> to get the null key value of the keyboard and store it in the field <code>invalid_key</code> and <code>key_value</code> as initial value. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm_keyboard</td><td>Pointer to the keyboard FSM. </td></tr>
    <tr><td class="paramname">debounce_time</td><td>Anti-debounce time in milliseconds </td></tr>
    <tr><td class="paramname">keyboard_id</td><td>Unique keyboard identifier number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c19f9f958bbe1f354c860429b861cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c19f9f958bbe1f354c860429b861cac">&#9670;&nbsp;</a></span>fsm_keyboard_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a>* fsm_keyboard_new </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>debounce_time_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>keyboard_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new keyboard FSM. </p>
<p>This function creates a new keyboard FSM with the given debounce time for all keys and keyboard ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debounce_time_ms</td><td>Debounce time in milliseconds for all keys. </td></tr>
    <tr><td class="paramname">keyboard_id</td><td>Keyboard ID. Must be unique. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsm_keyboard_t* Pointer to the keyboard FSM. </dd></dl>

</div>
</div>
<a id="a38ecbf29d78b69cf47621bd74d521a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ecbf29d78b69cf47621bd74d521a38">&#9670;&nbsp;</a></span>fsm_keyboard_reset_key_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_keyboard_reset_key_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the key pressed of the last keyboard press. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Set the field <code>key_pressed</code> to <code>invalid_key</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa3800f97988d6dcea1947029e18b1f6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3800f97988d6dcea1947029e18b1f6e">&#9670;&nbsp;</a></span>fsm_keyboard_start_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_keyboard_start_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the keyboard scanning. </p>
<p>This function starts the keyboard scanning by calling the appropriate port function.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call the appropriate port function passing the keyboard ID <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a327ce7c81f8e434bf46c193bd9362096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a327ce7c81f8e434bf46c193bd9362096">&#9670;&nbsp;</a></span>fsm_keyboard_stop_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_keyboard_stop_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__keyboard__t.html">fsm_keyboard_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the keyboard scanning. </p>
<p>This function stops the keyboard scanning by calling the appropriate port function.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>âœ… 1. Call the appropriate port function passing the keyboard ID <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__keyboard__t.html" title="Structure of the Keyboard FSM.">fsm_keyboard_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a06f1a2e6497aafa80e93c8d23e6be456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f1a2e6497aafa80e93c8d23e6be456">&#9670;&nbsp;</a></span>fsm_trans_keyboard</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fsm_trans_t fsm_trans_keyboard[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array representing the transitions table of the FSM keyboard. </p>
<div class="image">
<img src="fsm_v2.png" alt=""/>
</div>
 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_4e4d22e38ca4e2e8207825ee2d00bc54.html">src</a></li><li class="navelem"><a class="el" href="fsm__keyboard_8c.html">fsm_keyboard.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
